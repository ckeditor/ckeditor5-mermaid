{"version":3,"file":"index.js","sources":["../src/utils.js","../src/commands/mermaidPreviewCommand.js","../src/commands/mermaidSourceViewCommand.js","../src/commands/mermaidSplitViewCommand.js","../src/commands/insertMermaidCommand.js","../src/mermaidediting.js","../src/mermaidtoolbar.js","../src/mermaidui.js","../src/mermaid.js","../src/index.js"],"sourcesContent":["/**\n * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module mermaid/utils\n */\n\n/**\n * Helper function for setting the `isOn` state of buttons.\n *\n * @private\n * @param {module:core/editor/editor~Editor} editor\n * @param {String} commandName Short name of the command.\n * @returns {Boolean}\n */\nexport function checkIsOn( editor, commandName ) {\n\tconst selection = editor.model.document.selection;\n\tconst mermaidItem = selection.getSelectedElement() || selection.getLastPosition().parent;\n\n\tif ( mermaidItem && mermaidItem.is( 'element', 'mermaid' ) && mermaidItem.getAttribute( 'displayMode' ) === commandName ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * @module mermaid/mermaidpreviewcommand\n */\n\nimport { Command } from 'ckeditor5/src/core.js';\n\nimport { checkIsOn } from '../utils.js';\n\n/**\n * The mermaid preview command.\n *\n * Allows to switch to a preview mode.\n *\n * @extends module:core/command~Command\n */\nexport default class MermaidPreviewCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst editor = this.editor;\n\t\tconst documentSelection = editor.model.document.selection;\n\t\tconst selectedElement = documentSelection.getSelectedElement();\n\t\tconst isSelectedElementMermaid = selectedElement && selectedElement.name === 'mermaid';\n\n\t\tif ( isSelectedElementMermaid || documentSelection.getLastPosition().findAncestor( 'mermaid' ) ) {\n\t\t\tthis.isEnabled = !!selectedElement;\n\t\t} else {\n\t\t\tthis.isEnabled = false;\n\t\t}\n\n\t\tthis.value = checkIsOn( editor, 'preview' );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst editor = this.editor;\n\t\tconst model = editor.model;\n\t\tconst documentSelection = this.editor.model.document.selection;\n\t\tconst mermaidItem = documentSelection.getSelectedElement() || documentSelection.getLastPosition().parent;\n\n\t\tmodel.change( writer => {\n\t\t\tif ( mermaidItem.getAttribute( 'displayMode' ) !== 'preview' ) {\n\t\t\t\twriter.setAttribute( 'displayMode', 'preview', mermaidItem );\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @module mermaid/mermaidsourceviewcommand\n */\n\nimport { Command } from 'ckeditor5/src/core.js';\n\nimport { checkIsOn } from '../utils.js';\n\n/**\n * The mermaid source view command.\n *\n * Allows to switch to a source view mode.\n *\n * @extends module:core/command~Command\n */\nexport default class MermaidSourceViewCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst editor = this.editor;\n\t\tconst documentSelection = editor.model.document.selection;\n\t\tconst selectedElement = documentSelection.getSelectedElement();\n\t\tconst isSelectedElementMermaid = selectedElement && selectedElement.name === 'mermaid';\n\n\t\tif ( isSelectedElementMermaid || documentSelection.getLastPosition().findAncestor( 'mermaid' ) ) {\n\t\t\tthis.isEnabled = !!selectedElement;\n\t\t} else {\n\t\t\tthis.isEnabled = false;\n\t\t}\n\n\t\tthis.value = checkIsOn( editor, 'source' );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst editor = this.editor;\n\t\tconst model = editor.model;\n\t\tconst documentSelection = this.editor.model.document.selection;\n\t\tconst mermaidItem = documentSelection.getSelectedElement() || documentSelection.getLastPosition().parent;\n\n\t\tmodel.change( writer => {\n\t\t\tif ( mermaidItem.getAttribute( 'displayMode' ) !== 'source' ) {\n\t\t\t\twriter.setAttribute( 'displayMode', 'source', mermaidItem );\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @module mermaid/mermaidsplitviewcommand\n */\n\nimport { Command } from 'ckeditor5/src/core.js';\n\nimport { checkIsOn } from '../utils.js';\n\n/**\n * The mermaid split view command.\n *\n * Allows to switch to a split view mode.\n *\n * @extends module:core/command~Command\n */\nexport default class MermaidSplitViewCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst editor = this.editor;\n\t\tconst documentSelection = editor.model.document.selection;\n\t\tconst selectedElement = documentSelection.getSelectedElement();\n\t\tconst isSelectedElementMermaid = selectedElement && selectedElement.name === 'mermaid';\n\n\t\tif ( isSelectedElementMermaid || documentSelection.getLastPosition().findAncestor( 'mermaid' ) ) {\n\t\t\tthis.isEnabled = !!selectedElement;\n\t\t} else {\n\t\t\tthis.isEnabled = false;\n\t\t}\n\n\t\tthis.value = checkIsOn( editor, 'split' );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst editor = this.editor;\n\t\tconst model = editor.model;\n\t\tconst documentSelection = this.editor.model.document.selection;\n\t\tconst mermaidItem = documentSelection.getSelectedElement() || documentSelection.getLastPosition().parent;\n\n\t\tmodel.change( writer => {\n\t\t\tif ( mermaidItem.getAttribute( 'displayMode' ) !== 'split' ) {\n\t\t\t\twriter.setAttribute( 'displayMode', 'split', mermaidItem );\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @module mermaid/insertmermaidcommand\n */\n\nimport { Command } from 'ckeditor5/src/core.js';\n\nconst MOCK_MERMAID_MARKUP = `flowchart TB\nA --> B\nB --> C`;\n\n/**\n * The insert mermaid command.\n *\n * Allows to insert mermaid.\n *\n * @extends module:core/command~Command\n */\nexport default class InsertMermaidCommand extends Command {\n\t/**\n\t * @inheritDoc\n\t */\n\trefresh() {\n\t\tconst documentSelection = this.editor.model.document.selection;\n\t\tconst selectedElement = documentSelection.getSelectedElement();\n\n\t\tif ( selectedElement && selectedElement.name === 'mermaid' ) {\n\t\t\tthis.isEnabled = false;\n\t\t} else {\n\t\t\tthis.isEnabled = true;\n\t\t}\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\texecute() {\n\t\tconst editor = this.editor;\n\t\tconst model = editor.model;\n\t\tlet mermaidItem;\n\n\t\tmodel.change( writer => {\n\t\t\tmermaidItem = writer.createElement( 'mermaid', {\n\t\t\t\tdisplayMode: 'split',\n\t\t\t\tsource: MOCK_MERMAID_MARKUP\n\t\t\t} );\n\n\t\t\tmodel.insertContent( mermaidItem );\n\t\t} );\n\n\t\treturn mermaidItem;\n\t}\n}\n","/**\n * @module mermaid/mermaidediting\n */\n\nimport { Plugin } from 'ckeditor5/src/core.js';\nimport { toWidget } from 'ckeditor5/src/widget.js';\n\nimport mermaid from 'mermaid/dist/mermaid.js';\n\nimport { debounce } from 'lodash-es';\n\nimport MermaidPreviewCommand from './commands/mermaidPreviewCommand.js';\nimport MermaidSourceViewCommand from './commands/mermaidSourceViewCommand.js';\nimport MermaidSplitViewCommand from './commands/mermaidSplitViewCommand.js';\nimport InsertMermaidCommand from './commands/insertMermaidCommand.js';\n\n// Time in milliseconds.\nconst DEBOUNCE_TIME = 300;\n\nexport default class MermaidEditing extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'MermaidEditing';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tthis._registerCommands();\n\t\tthis._defineConverters();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tafterInit() {\n\t\tthis.editor.model.schema.register( 'mermaid', {\n\t\t\tallowAttributes: [ 'displayMode', 'source' ],\n\t\t\tallowWhere: '$block',\n\t\t\tisObject: true\n\t\t} );\n\t}\n\n\t/**\n\t * @inheritDoc\n\t*/\n\t_registerCommands() {\n\t\tconst editor = this.editor;\n\n\t\teditor.commands.add( 'mermaidPreviewCommand', new MermaidPreviewCommand( editor ) );\n\t\teditor.commands.add( 'mermaidSplitViewCommand', new MermaidSplitViewCommand( editor ) );\n\t\teditor.commands.add( 'mermaidSourceViewCommand', new MermaidSourceViewCommand( editor ) );\n\t\teditor.commands.add( 'insertMermaidCommand', new InsertMermaidCommand( editor ) );\n\t}\n\n\t/**\n\t * Adds converters.\n\t *\n\t * @private\n\t */\n\t_defineConverters() {\n\t\tconst editor = this.editor;\n\n\t\teditor.data.downcastDispatcher.on( 'insert:mermaid', this._mermaidDataDowncast.bind( this ) );\n\t\teditor.editing.downcastDispatcher.on( 'insert:mermaid', this._mermaidDowncast.bind( this ) );\n\t\teditor.editing.downcastDispatcher.on( 'attribute:source:mermaid', this._sourceAttributeDowncast.bind( this ) );\n\n\t\teditor.data.upcastDispatcher.on( 'element:code', this._mermaidUpcast.bind( this ), { priority: 'high' } );\n\n\t\teditor.conversion.for( 'editingDowncast' ).attributeToAttribute( {\n\t\t\tmodel: {\n\t\t\t\tname: 'mermaid',\n\t\t\t\tkey: 'displayMode'\n\t\t\t},\n\t\t\tview: modelAttributeValue => ( {\n\t\t\t\tkey: 'class',\n\t\t\t\tvalue: 'ck-mermaid__' + modelAttributeValue + '-mode'\n\t\t\t} )\n\t\t} );\n\t}\n\n\t/**\n\t *\n\t * @private\n\t * @param {*} evt\n\t * @param {*} data\n\t * @param {*} conversionApi\n\t */\n\t_mermaidDataDowncast( evt, data, conversionApi ) {\n\t\tconst model = this.editor.model;\n\t\tconst { writer, mapper } = conversionApi;\n\n\t\tif ( !conversionApi.consumable.consume( data.item, 'insert' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst targetViewPosition = mapper.toViewPosition( model.createPositionBefore( data.item ) );\n\t\t// For downcast we're using only language-mermaid class. We don't set class to `mermaid language-mermaid` as\n\t\t// multiple markdown converters that we have seen are using only `language-mermaid` class and not `mermaid` alone.\n\t\tconst code = writer.createContainerElement( 'code', {\n\t\t\tclass: 'language-mermaid'\n\t\t} );\n\t\tconst pre = writer.createContainerElement( 'pre', {\n\t\t\tspellcheck: 'false'\n\t\t} );\n\t\tconst sourceTextNode = writer.createText( data.item.getAttribute( 'source' ) );\n\n\t\twriter.insert( model.createPositionAt( code, 'end' ), sourceTextNode );\n\t\twriter.insert( model.createPositionAt( pre, 'end' ), code );\n\t\twriter.insert( targetViewPosition, pre );\n\t\tmapper.bindElements( data.item, code );\n\t}\n\n\t/**\n\t *\n\t * @private\n\t * @param {*} evt\n\t * @param {*} data\n\t * @param {*} conversionApi\n\t */\n\t_mermaidDowncast( evt, data, conversionApi ) {\n\t\tconst { writer, mapper, consumable } = conversionApi;\n\t\tconst { editor } = this;\n\t\tconst { model, t } = editor;\n\t\tconst that = this;\n\n\t\tif ( !consumable.consume( data.item, 'insert' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst targetViewPosition = mapper.toViewPosition( model.createPositionBefore( data.item ) );\n\n\t\tconst wrapperAttributes = {\n\t\t\tclass: [ 'ck-mermaid__wrapper' ]\n\t\t};\n\t\tconst textareaAttributes = {\n\t\t\tclass: [ 'ck-mermaid__editing-view' ],\n\t\t\tplaceholder: t( 'Insert mermaid source code' ),\n\t\t\t'data-cke-ignore-events': true\n\t\t};\n\n\t\tconst wrapper = writer.createContainerElement( 'div', wrapperAttributes );\n\t\tconst editingContainer = writer.createUIElement( 'textarea', textareaAttributes, createEditingTextarea );\n\t\tconst previewContainer = writer.createUIElement( 'div', { class: [ 'ck-mermaid__preview' ] }, createMermaidPreview );\n\n\t\twriter.insert( writer.createPositionAt( wrapper, 'start' ), previewContainer );\n\t\twriter.insert( writer.createPositionAt( wrapper, 'start' ), editingContainer );\n\n\t\twriter.insert( targetViewPosition, wrapper );\n\n\t\tmapper.bindElements( data.item, wrapper );\n\n\t\treturn toWidget( wrapper, writer, {\n\t\t\twidgetLabel: t( 'Mermaid widget' ),\n\t\t\thasSelectionHandle: true\n\t\t} );\n\n\t\tfunction createEditingTextarea( domDocument ) {\n\t\t\tconst domElement = this.toDomElement( domDocument );\n\n\t\t\tdomElement.value = data.item.getAttribute( 'source' );\n\n\t\t\tconst debouncedListener = debounce( event => {\n\t\t\t\teditor.model.change( writer => {\n\t\t\t\t\twriter.setAttribute( 'source', event.target.value, data.item );\n\t\t\t\t} );\n\t\t\t}, DEBOUNCE_TIME );\n\n\t\t\tdomElement.addEventListener( 'input', debouncedListener );\n\n\t\t\t/* Workaround for internal #1544 */\n\t\t\tdomElement.addEventListener( 'focus', () => {\n\t\t\t\tconst model = editor.model;\n\t\t\t\tconst selectedElement = model.document.selection.getSelectedElement();\n\n\t\t\t\t// Move the selection onto the mermaid widget if it's currently not selected.\n\t\t\t\tif ( selectedElement !== data.item ) {\n\t\t\t\t\tmodel.change( writer => writer.setSelection( data.item, 'on' ) );\n\t\t\t\t}\n\t\t\t}, true );\n\n\t\t\treturn domElement;\n\t\t}\n\n\t\tfunction createMermaidPreview( domDocument ) {\n\t\t\t// Taking the text from the wrapper container element for now\n\t\t\tconst mermaidSource = data.item.getAttribute( 'source' );\n\t\t\tconst domElement = this.toDomElement( domDocument );\n\n\t\t\tdomElement.innerHTML = mermaidSource;\n\n\t\t\twindow.setTimeout( () => {\n\t\t\t\t// @todo: by the looks of it the domElement needs to be hooked to tree in order to allow for rendering.\n\t\t\t\tthat._renderMermaid( domElement );\n\t\t\t}, 100 );\n\n\t\t\treturn domElement;\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param {*} evt\n\t * @param {*} data\n\t * @param {*} conversionApi\n\t * @returns\n\t */\n\t_sourceAttributeDowncast( evt, data, conversionApi ) {\n\t\t// @todo: test whether the attribute was consumed.\n\t\tconst newSource = data.attributeNewValue;\n\t\tconst domConverter = this.editor.editing.view.domConverter;\n\n\t\tif ( newSource ) {\n\t\t\tconst mermaidView = conversionApi.mapper.toViewElement( data.item );\n\n\t\t\tfor ( const child of mermaidView.getChildren() ) {\n\t\t\t\tif ( child.name === 'textarea' && child.hasClass( 'ck-mermaid__editing-view' ) ) {\n\t\t\t\t\tconst domEditingTextarea = domConverter.viewToDom( child, window.document );\n\n\t\t\t\t\tif ( domEditingTextarea.value != newSource ) {\n\t\t\t\t\t\tdomEditingTextarea.value = newSource;\n\t\t\t\t\t}\n\t\t\t\t} else if ( child.name === 'div' && child.hasClass( 'ck-mermaid__preview' ) ) {\n\t\t\t\t\t// @todo: we could optimize this and not refresh mermaid if widget is in source mode.\n\t\t\t\t\tconst domPreviewWrapper = domConverter.viewToDom( child, window.document );\n\n\t\t\t\t\tif ( domPreviewWrapper ) {\n\t\t\t\t\t\tdomPreviewWrapper.innerHTML = newSource;\n\t\t\t\t\t\tdomPreviewWrapper.removeAttribute( 'data-processed' );\n\n\t\t\t\t\t\tthis._renderMermaid( domPreviewWrapper );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @private\n\t * @param {*} evt\n\t * @param {*} data\n\t * @param {*} conversionApi\n\t */\n\t_mermaidUpcast( evt, data, conversionApi ) {\n\t\tconst viewCodeElement = data.viewItem;\n\t\tconst hasPreElementParent = !viewCodeElement.parent || !viewCodeElement.parent.is( 'element', 'pre' );\n\t\tconst hasCodeAncestors = data.modelCursor.findAncestor( 'code' );\n\t\tconst { consumable, writer } = conversionApi;\n\n\t\tif ( !viewCodeElement.hasClass( 'language-mermaid' ) || hasPreElementParent || hasCodeAncestors ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !consumable.test( viewCodeElement, { name: true } ) ) {\n\t\t\treturn;\n\t\t}\n\t\tconst mermaidSource = Array.from( viewCodeElement.getChildren() )\n\t\t\t.filter( item => item.is( '$text' ) )\n\t\t\t.map( item => item.data )\n\t\t\t.join( '' );\n\n\t\tconst mermaidElement = writer.createElement( 'mermaid', {\n\t\t\tsource: mermaidSource,\n\t\t\tdisplayMode: 'split'\n\t\t} );\n\n\t\t// Let's try to insert mermaid element.\n\t\tif ( !conversionApi.safeInsert( mermaidElement, data.modelCursor ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconsumable.consume( viewCodeElement, { name: true } );\n\n\t\tconversionApi.updateConversionResult( mermaidElement, data );\n\t}\n\n\t/**\n\t * Renders Mermaid in a given `domElement`. Expect this domElement to have mermaid\n\t * source set as text content.\n\t *\n\t * @param {HTMLElement} domElement\n\t */\n\t_renderMermaid( domElement ) {\n\t\tmermaid.init( undefined, domElement );\n\t}\n}\n","/**\n * @module mermaid/mermaidtoolbar\n */\n\nimport { Plugin } from 'ckeditor5/src/core.js';\nimport { WidgetToolbarRepository } from 'ckeditor5/src/widget.js';\n\nexport default class MermaidToolbar extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ WidgetToolbarRepository ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'MermaidToolbar';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tafterInit() {\n\t\tconst editor = this.editor;\n\t\tconst t = editor.t;\n\n\t\tconst widgetToolbarRepository = editor.plugins.get( WidgetToolbarRepository );\n\t\tconst mermaidToolbarItems = [ 'mermaidSourceView', 'mermaidSplitView', 'mermaidPreview', '|', 'mermaidInfo' ];\n\n\t\tif ( mermaidToolbarItems ) {\n\t\t\twidgetToolbarRepository.register( 'mermaidToolbar', {\n\t\t\t\tariaLabel: t( 'Mermaid toolbar' ),\n\t\t\t\titems: mermaidToolbarItems,\n\t\t\t\tgetRelatedElement: selection => getSelectedElement( selection )\n\t\t\t} );\n\t\t}\n\t}\n}\n\nfunction getSelectedElement( selection ) {\n\tconst viewElement = selection.getSelectedElement();\n\n\tif ( viewElement && viewElement.hasClass( 'ck-mermaid__wrapper' ) ) {\n\t\treturn viewElement;\n\t}\n\n\treturn null;\n}\n","/**\n * @module mermaid/mermaidui\n */\n\nimport { Plugin } from 'ckeditor5/src/core.js';\nimport { ButtonView } from 'ckeditor5/src/ui.js';\n\nimport insertMermaidIcon from '../theme/icons/insert.svg';\nimport previewModeIcon from '../theme/icons/preview-mode.svg';\nimport splitModeIcon from '../theme/icons/split-mode.svg';\nimport sourceModeIcon from '../theme/icons/source-mode.svg';\nimport infoIcon from '../theme/icons/info.svg';\n\nexport default class MermaidUI extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'MermaidUI';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tthis._addButtons();\n\t}\n\n\t/**\n\t * Adds all mermaid-related buttons.\n\t *\n\t * @private\n\t */\n\t_addButtons() {\n\t\tconst editor = this.editor;\n\n\t\tthis._addInsertMermaidButton();\n\t\tthis._addMermaidInfoButton();\n\t\tthis._createToolbarButton( editor, 'mermaidPreview', 'Preview', previewModeIcon );\n\t\tthis._createToolbarButton( editor, 'mermaidSourceView', 'Source view', sourceModeIcon );\n\t\tthis._createToolbarButton( editor, 'mermaidSplitView', 'Split view', splitModeIcon );\n\t}\n\n\t/**\n\t * Adds the button for inserting mermaid.\n\t *\n\t * @private\n\t */\n\t_addInsertMermaidButton() {\n\t\tconst editor = this.editor;\n\t\tconst t = editor.t;\n\t\tconst view = editor.editing.view;\n\n\t\teditor.ui.componentFactory.add( 'mermaid', locale => {\n\t\t\tconst buttonView = new ButtonView( locale );\n\t\t\tconst command = editor.commands.get( 'insertMermaidCommand' );\n\n\t\t\tbuttonView.set( {\n\t\t\t\tlabel: t( 'Insert Mermaid diagram' ),\n\t\t\t\ticon: insertMermaidIcon,\n\t\t\t\ttooltip: true\n\t\t\t} );\n\n\t\t\tbuttonView.bind( 'isOn', 'isEnabled' ).to( command, 'value', 'isEnabled' );\n\n\t\t\t// Execute the command when the button is clicked.\n\t\t\tcommand.listenTo( buttonView, 'execute', () => {\n\t\t\t\tconst mermaidItem = editor.execute( 'insertMermaidCommand' );\n\t\t\t\tconst mermaidItemViewElement = editor.editing.mapper.toViewElement( mermaidItem );\n\n\t\t\t\tview.scrollToTheSelection();\n\t\t\t\tview.focus();\n\n\t\t\t\tif ( mermaidItemViewElement ) {\n\t\t\t\t\tconst mermaidItemDomElement = view.domConverter.viewToDom( mermaidItemViewElement, document );\n\n\t\t\t\t\tif ( mermaidItemDomElement ) {\n\t\t\t\t\t\tmermaidItemDomElement.querySelector( '.ck-mermaid__editing-view' ).focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn buttonView;\n\t\t} );\n\t}\n\n\t/**\n\t * Adds the button linking to the mermaid guide.\n\t *\n\t * @private\n\t */\n\t_addMermaidInfoButton() {\n\t\tconst editor = this.editor;\n\t\tconst t = editor.t;\n\n\t\teditor.ui.componentFactory.add( 'mermaidInfo', locale => {\n\t\t\tconst buttonView = new ButtonView( locale );\n\t\t\tconst link = 'https://ckeditor.com/blog/basic-overview-of-creating-flowcharts-using-mermaid/';\n\n\t\t\tbuttonView.set( {\n\t\t\t\tlabel: t( 'Read more about Mermaid diagram syntax' ),\n\t\t\t\ticon: infoIcon,\n\t\t\t\ttooltip: true\n\t\t\t} );\n\n\t\t\tbuttonView.on( 'execute', () => {\n\t\t\t\twindow.open( link, '_blank', 'noopener' );\n\t\t\t} );\n\n\t\t\treturn buttonView;\n\t\t} );\n\t}\n\n\t/**\n\t * Adds the mermaid balloon toolbar button.\n\t *\n\t * @private\n\t * @param {module:core/editor/editor~Editor} editor\n\t * @param {String} name Name of the button.\n\t * @param {String} label Label for the button.\n\t * @param {String} icon The button icon.\n\t */\n\t_createToolbarButton( editor, name, label, icon ) {\n\t\tconst t = editor.t;\n\n\t\teditor.ui.componentFactory.add( name, locale => {\n\t\t\tconst buttonView = new ButtonView( locale );\n\t\t\tconst command = editor.commands.get( `${ name }Command` );\n\n\t\t\tbuttonView.set( {\n\t\t\t\tlabel: t( label ),\n\t\t\t\ticon,\n\t\t\t\ttooltip: true\n\t\t\t} );\n\n\t\t\tbuttonView.bind( 'isOn', 'isEnabled' ).to( command, 'value', 'isEnabled' );\n\n\t\t\t// Execute the command when the button is clicked.\n\t\t\tcommand.listenTo( buttonView, 'execute', () => {\n\t\t\t\teditor.execute( `${ name }Command` );\n\t\t\t\teditor.editing.view.scrollToTheSelection();\n\t\t\t\teditor.editing.view.focus();\n\t\t\t} );\n\n\t\t\treturn buttonView;\n\t\t} );\n\t}\n}\n","/**\n * @module mermaid/mermaid\n */\n\nimport { Plugin } from 'ckeditor5/src/core.js';\n\nimport MermaidEditing from './mermaidediting.js';\nimport MermaidToolbar from './mermaidtoolbar.js';\nimport MermaidUI from './mermaidui.js';\n\nimport '../theme/mermaid.css';\n\nexport default class Mermaid extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get requires() {\n\t\treturn [ MermaidEditing, MermaidToolbar, MermaidUI ];\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'Mermaid';\n\t}\n}\n","/**\n * @module mermaid\n */\n\nimport infoIcon from './../theme/icons/info.svg';\nimport insertMermaidIcon from './../theme/icons/insert.svg';\nimport previewModeIcon from './../theme/icons/preview-mode.svg';\nimport splitModeIcon from './../theme/icons/split-mode.svg';\nimport sourceModeIcon from './../theme/icons/source-mode.svg';\n\nexport { default as Mermaid } from './mermaid.js';\n\nexport const icons = {\n\tinfoIcon,\n\tinsertMermaidIcon,\n\tpreviewModeIcon,\n\tsplitModeIcon,\n\tsourceModeIcon\n};\n"],"names":["checkIsOn","editor","commandName","selection","model","document","mermaidItem","getSelectedElement","getLastPosition","parent","is","getAttribute","MermaidPreviewCommand","Command","refresh","documentSelection","selectedElement","isSelectedElementMermaid","name","findAncestor","isEnabled","value","execute","change","writer","setAttribute","MermaidSourceViewCommand","MermaidSplitViewCommand","MOCK_MERMAID_MARKUP","InsertMermaidCommand","createElement","displayMode","source","insertContent","DEBOUNCE_TIME","MermaidEditing","Plugin","pluginName","init","_registerCommands","_defineConverters","afterInit","schema","register","allowAttributes","allowWhere","isObject","commands","add","data","downcastDispatcher","on","_mermaidDataDowncast","bind","editing","_mermaidDowncast","_sourceAttributeDowncast","upcastDispatcher","_mermaidUpcast","priority","conversion","for","attributeToAttribute","key","view","modelAttributeValue","evt","conversionApi","mapper","consumable","consume","item","targetViewPosition","toViewPosition","createPositionBefore","code","createContainerElement","class","pre","spellcheck","sourceTextNode","createText","insert","createPositionAt","bindElements","t","that","wrapperAttributes","textareaAttributes","placeholder","wrapper","editingContainer","createUIElement","createEditingTextarea","previewContainer","createMermaidPreview","toWidget","widgetLabel","hasSelectionHandle","domDocument","domElement","toDomElement","debouncedListener","debounce","event","target","addEventListener","setSelection","mermaidSource","innerHTML","window","setTimeout","_renderMermaid","newSource","attributeNewValue","domConverter","mermaidView","toViewElement","child","getChildren","hasClass","domEditingTextarea","viewToDom","domPreviewWrapper","removeAttribute","viewCodeElement","viewItem","hasPreElementParent","hasCodeAncestors","modelCursor","test","Array","from","filter","map","join","mermaidElement","safeInsert","updateConversionResult","mermaid","undefined","MermaidToolbar","requires","WidgetToolbarRepository","widgetToolbarRepository","plugins","get","mermaidToolbarItems","ariaLabel","items","getRelatedElement","viewElement","MermaidUI","_addButtons","_addInsertMermaidButton","_addMermaidInfoButton","_createToolbarButton","previewModeIcon","sourceModeIcon","splitModeIcon","ui","componentFactory","locale","buttonView","ButtonView","command","set","label","icon","insertMermaidIcon","tooltip","to","listenTo","mermaidItemViewElement","scrollToTheSelection","focus","mermaidItemDomElement","querySelector","link","infoIcon","open","Mermaid","icons"],"mappings":"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"}